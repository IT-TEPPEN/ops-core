# グループ管理ガイド

このガイドでは、OpsCoreのグループ管理機能について説明します。

## 目次

- [グループとは](#グループとは)
- [グループの作成](#グループの作成)
- [メンバーの管理](#メンバーの管理)
- [グループの権限](#グループの権限)
- [グループの編集・削除](#グループの編集削除)

## グループとは

グループは、複数のユーザーをまとめて管理するための機能です。グループを使用することで、ドキュメントや作業証跡のアクセス権限を効率的に管理できます。

### 使用例

- **チーム単位**: デプロイチーム、監視チーム、開発チーム
- **プロジェクト単位**: プロジェクトA、プロジェクトB
- **役割単位**: 管理者グループ、オペレーターグループ

### メリット

- **効率的な権限管理**: 個別設定不要
- **メンバー管理の簡素化**: グループ単位での追加・削除
- **アクセス制御の明確化**: グループ単位での可視化

## グループの作成

### 作成権限

グループの作成は、以下のユーザーが可能です：
- 管理者（Admin）
- グループ作成権限を持つユーザー

### 作成手順

```
1. ナビゲーションメニュー → 「グループ管理」
2. 「新規グループ」ボタンをクリック
3. グループ情報を入力:
   - グループ名: グループの表示名
   - 説明: グループの目的や用途
4. 「作成」ボタンをクリック
```

### グループ情報の入力例

```
┌─────────────────────────────┐
│ グループ作成                 │
├─────────────────────────────┤
│ グループ名 *                 │
│ [デプロイチーム      ]      │
├─────────────────────────────┤
│ 説明                         │
│ [本番環境デプロイを担当する  │
│  チームのグループ    ]      │
├─────────────────────────────┤
│ [作成] [キャンセル]          │
└─────────────────────────────┘
```

## メンバーの管理

### メンバーの追加

```
1. グループ一覧から対象グループを選択
2. 「メンバー」タブをクリック
3. 「メンバーを追加」ボタンをクリック
4. ユーザーを検索して選択
5. 「追加」ボタンをクリック
```

### 複数メンバーの一括追加

```
1. グループ詳細画面 → 「メンバー」タブ
2. 「一括追加」ボタンをクリック
3. ユーザーを複数選択
4. 「追加」ボタンをクリック
```

### メンバーの削除

```
1. グループ詳細画面 → 「メンバー」タブ
2. メンバー一覧から対象ユーザーを選択
3. 「削除」ボタンをクリック
4. 確認ダイアログで「削除」を選択
```

### メンバー一覧の表示

```
メンバー一覧では、以下が表示されます：
- ユーザー名
- メールアドレス
- 参加日
- 役割（一般メンバー/グループ管理者）
```

## グループの権限

### グループへのアクセス権限付与

グループにドキュメントや作業証跡のアクセス権限を付与できます。

#### ドキュメントへのアクセス

```
1. ドキュメント詳細画面を開く
2. 「共有」タブをクリック
3. 「グループを追加」ボタンをクリック
4. 対象グループを選択
5. 「追加」ボタンをクリック
```

#### 作業証跡へのアクセス

```
1. 作業証跡詳細画面を開く
2. 「共有」タブをクリック
3. 「グループを追加」ボタンをクリック
4. 対象グループを選択
5. 「追加」ボタンをクリック
```

### グループ管理者

グループには、グループ管理者を設定できます。

#### グループ管理者の権限

- グループ情報の編集
- メンバーの追加・削除
- グループの削除（システム管理者のみ）

#### グループ管理者の設定

```
1. グループ詳細画面 → 「メンバー」タブ
2. 対象メンバーの右側の「役割」を変更
3. 「グループ管理者」を選択
4. 「保存」ボタンをクリック
```

## グループの編集・削除

### グループ情報の編集

```
1. グループ一覧から対象グループを選択
2. 「編集」ボタンをクリック
3. グループ名または説明を変更
4. 「保存」ボタンをクリック
```

### グループの削除

```
1. グループ一覧から対象グループを選択
2. 「削除」ボタンをクリック
3. 確認ダイアログで「削除」を選択
```

**注意**: グループを削除すると、以下が影響を受けます：
- グループに付与されたアクセス権限が削除される
- メンバーシップ情報が削除される
- グループを参照しているドキュメント・作業証跡のアクセス設定を見直す必要がある

## 実際の使用例

### 例1: デプロイチームの管理

#### グループ作成

```
グループ名: デプロイチーム
説明: 本番環境へのデプロイを担当するチーム
メンバー:
  - tanaka (グループ管理者)
  - suzuki
  - sato
```

#### アクセス権限の設定

```
アクセス可能なドキュメント:
  - 本番環境デプロイ手順
  - ロールバック手順
  - データベースメンテナンス手順

アクセス可能な作業証跡:
  - デプロイチームの全作業証跡
```

### 例2: プロジェクトAチームの管理

#### グループ作成

```
グループ名: プロジェクトAチーム
説明: プロジェクトAの開発・運用メンバー
メンバー:
  - yamada (グループ管理者)
  - watanabe
  - kobayashi
  - ito
```

#### アクセス権限の設定

```
アクセス可能なドキュメント:
  - プロジェクトA関連の全手順書
  - 開発環境セットアップ手順
  - テスト手順

アクセス可能な作業証跡:
  - プロジェクトAチームの全作業証跡
```

## ベストプラクティス

### 1. 明確なグループ名

グループ名は、目的や対象が分かりやすい名前にしましょう。

**良い例**:
- デプロイチーム
- プロジェクトA開発チーム
- インフラ運用グループ

**悪い例**:
- グループ1
- チームA
- test

### 2. グループの説明を記載

グループの目的や用途を説明に記載しましょう。

```
説明: 本番環境へのデプロイを担当するチーム。
      デプロイ手順書とロールバック手順書へのアクセス権限を持つ。
```

### 3. 定期的なメンバー見直し

- 異動や退職に伴うメンバーの削除
- 新規参加者の追加
- 不要なグループの削除

### 4. グループ管理者の設定

各グループに最低1人のグループ管理者を設定しましょう。

### 5. 権限の最小化

必要最小限の権限のみを付与しましょう。

## トラブルシューティング

### Q: グループが作成できない

**A**: 以下を確認してください：
- 管理者権限があるか
- グループ名が重複していないか
- 必須項目が入力されているか

### Q: メンバーを追加できない

**A**: 以下を確認してください：
- グループ管理者またはシステム管理者の権限があるか
- 対象ユーザーが既にメンバーでないか
- 対象ユーザーが有効なアカウントか

### Q: グループを削除できない

**A**: 以下を確認してください：
- システム管理者の権限があるか
- グループが他のリソースで参照されていないか

### Q: アクセス権限が反映されない

**A**: 以下を確認してください：
- グループにメンバーが正しく追加されているか
- ドキュメント・作業証跡の共有設定でグループが選択されているか
- ブラウザのキャッシュをクリアしてみる

## グループの活用シナリオ

### シナリオ1: 新規メンバーの追加

```
1. 新入社員Aさんが配属された
2. 所属チームのグループに追加
3. グループに付与された全ての権限が自動的に適用される
4. 個別に権限設定する必要なし
```

### シナリオ2: プロジェクト終了時

```
1. プロジェクトBが終了
2. プロジェクトBグループを削除
3. 関連する作業証跡は履歴として残る
4. メンバーは他のグループに再配置
```

### シナリオ3: 組織変更

```
1. 部署が再編成された
2. 既存グループのメンバーを調整
3. 新規グループを作成
4. アクセス権限を再設定
```

## 関連ドキュメント

- [ユーザーガイド](./README.md)
- [ドキュメント管理](./document-management.md)
- [作業証跡記録](./execution-record.md)
